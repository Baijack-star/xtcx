# Trae IDE监控器

一个用于监控Trae IDE运行状态的自动化工具。当检测到IDE停止工作时，会自动输入"继续你的使命"并发送，以重新激活AI助手。

## 功能特点

- 🔍 **静默监控**: 后台运行，不干扰正常工作
- 🎯 **图像识别**: 通过截图和模板匹配检测目标按钮
- ⚡ **自动激活**: 检测到停止状态时自动发送激活消息
- 🕐 **定时监控**: 15秒间隔检测（可配置）

## 安装依赖

```bash
pip install -r requirements.txt
```

## 使用方法

1. 确保 `dd.PNG` 文件在项目目录中（这是目标按钮的截图）

2. 测试检测功能：
```bash
python test_detection.py
```

3. **重要**: 如果出现误检测，请校准阈值：
```bash
python calibrate_threshold.py
```

4. 运行监控器：
```bash
python trae_ide_monitor.py
```

5. 按 `Ctrl+C` 停止监控

## 配置说明

可以在 `TraeIDEMonitor` 类的 `__init__` 方法中修改以下参数：

- `monitor_interval`: 监控间隔（秒），默认15秒
- `input_text`: 要发送的文本，默认"继续你的使命"
- `match_threshold`: 图像匹配阈值，默认0.95（较严格，避免误检测）

## 工作原理

1. 每15秒截取全屏画面
2. 使用OpenCV模板匹配查找目标按钮
3. 如果找到按钮，说明IDE处于停止状态
4. 自动点击输入框，输入激活文本，点击发送按钮
5. 如果未找到按钮，说明AI助手正在工作，继续等待

## 故障排除

### 误检测问题
如果监控器错误地将运行状态识别为停止状态：

1. 运行阈值校准工具：
```bash
python calibrate_threshold.py
```

2. 分别在停止状态和运行状态下测试匹配度
3. 选择合适的阈值（建议在两个状态匹配度之间）
4. 在 `trae_ide_monitor.py` 中修改 `match_threshold` 值

### 常见阈值设置
- **严格模式**: 0.95+ （避免误检测，但可能漏检）
- **平衡模式**: 0.85-0.94 （推荐）
- **宽松模式**: 0.80-0.84 （可能误检测）

## 注意事项

- 首次使用前请确保目标按钮截图 `dd.PNG` 准确
- 程序需要屏幕访问权限
- 建议在稳定的显示环境下使用
- 如果界面发生变化，可能需要重新截取目标按钮图片